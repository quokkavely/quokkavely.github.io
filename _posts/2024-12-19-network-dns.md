---
title : "[Network] DNS 와 DNS 요청"
categories: Network
tag : [CS,Network,개념정리, DNS, HTTPS]
author_profile: true
---

📌 개인적인 공간으로 공부를 기록하고 복습하기 위해 사용하는 블로그입니다. <br>
정확하지 않은 정보가 있을 수 있으니 참고바랍니다 :😸 <br>
[틀린 내용은 댓글로 남겨주시면 복받으실거에요]  
{: .notice--primary}

# **DNS 와 DNS 요청**
HTTPS 적용하면서 DNS에 대해 궁금한 점이 생겼고 새로 알게 된 내용이랑 헷갈렸던 내용 다시 정리해보았다.!


## **도메인 주소란?**

- **도메인 주소**는 사람이 기억하기 쉬운 문자 형태로, 실제 서버의 **IP 주소**를 대신하는 역할을 함
- 브라우저에 `google.com` 같은 도메인 주소를 입력하면 브라우저는 이를 **IP 주소로 변환**하기 위해 **DNS 요청**을 보냄

## DNS 네임 서버

### DNS의 계층 구조

- **루트 도메인 (Root Domain)**
    - 도메인 네임의 최상위 계층. 예: `.` (생략됨)
- **최상위 도메인 (TLD: Top Level Domain)**
    - 도메인의 확장자 부분. 예: `.com`, `.org`, `.net`.
- **도메인 (세컨드 레벨 도메인)**
    - 사용자 정의 도메인. 예: `example.com`의 `example`.
- **3단계 도메인 (서브도메인)**
    - 도메인의 하위 주소. 예: `www.example.com`, `mail.example.com`

### **FQDN (Fully Qualified Domain Name)**

- 도메인 이름 전체를 포함한 이름으로, **절대 도메인 이름**이라고도 함
- ex) `www.example.com.`

### **서브도메인**

- 도메인에 포함된 하위 도메인.
- ex) `mail.example.com`의 `mail`, `developer.example.com`의 `developer`

## **DNS 요청 과정**

### **1) 캐시 확인 (로컬 우선 처리)**

DNS 요청은 **최적화**를 위해 캐시를 우선 확인

- **브라우저 DNS 캐시**: 최근 요청된 도메인의 IP 주소가 저장됨
- **운영 체제(OS) DNS 캐시**: 브라우저 캐시에 없으면 OS 수준에서 확인
- **ISP의 DNS 서버 캐시**: 브라우저와 OS에서도 찾지 못하면, ISP(인터넷 제공업체)의 DNS 서버로 요청

### **2) 단계별 DNS 요청**

캐시에도 IP 주소가 없을 경우, 다음 단계를 거쳐 **DNS 서버**로 요청

1. **Root 네임서버**
    - DNS 계층 구조의 최상위
    - 요청된 도메인의 **TLD(.com, .net 등)** 네임서버 정보를 제공
2. **TLD 네임서버**
    - `.com`, `.org` 같은 도메인 확장자에 따라 해당 도메인의 **네임서버** 정보를 반환
3. **Authoritative 네임서버**
    - 최종적으로 도메인의 **IP 주소**를 반환
    - 도메인 소유자 또는 등록 대행사가 관리

## **서버 관리자 (네임서버 관리 주체)**

각 DNS 계층의 서버는 다음 기관이 관리

1. **Root 네임서버**
    - 전 세계적으로 13개의 Root 네임서버 클러스터가 존재하며, **ICANN/IANA**에서 관리
2. **TLD 네임서버**
    - `.com`은 **Verisign**, `.org`는 **Public Interest Registry(PIR)** 등 TLD별로 기관이 운영
3. **Authoritative 네임서버**
    - 도메인 소유자가 지정한 네임서버
    - 예: 가비아, AWS Route 53 등

## **네임서버의 도메인 관리**

네임서버는 요청에 응답하기 위해 존 파일(Zone File)이라는 데이터 파일을 사용

- **존 파일 구성 요소**:
    - **레코드 이름**: 도메인 이름 또는 서브 도메인 이름
    - **레코드 클래스**: 일반적으로 `IN`(인터넷)
    - **TTL(Time To Live)**: 캐시 데이터의 유효 기간
    - **레코드 타입**: 레코드 데이터의 형식
    - **레코드 데이터**: 실제 반환되는 IP 주소 또는 값

### **주요 레코드 타입**

- **A/AAAA 레코드**: IPv4/IPv6 주소
- **CNAME**: 도메인 이름을 다른 도메인으로 매핑
- **NS**: 네임서버의 주소
- **SOA(Start of Authority)**: 해당 도메인의 주 네임서버 정보

## **DNS 요청 방식**

### **DNS 재귀 요청 (Recursive Query)**

- **ISP의 DNS 서버**는 사용자가 요청한 도메인의 IP 주소를 찾기 위해 **Root → TLD → Authoritative 서버**를 순차적으로 요청
- 요청 과정 중 데이터를 캐싱하여 다음 요청 시 최적화

## **TTL (Time To Live)**

- **TTL**은 DNS 레코드의 **캐시 유효 기간**을 나타냄
- 캐시된 데이터는 TTL이 만료되면 새로 요청
- 짧은 TTL: 빠른 업데이트 가능하지만 요청 수 증가.
- 긴 TTL: 요청 수 감소, 변경사항 반영이 느림

## **AWS Route 53에서 도메인 관리**

- Route 53에서 호스팅 영역을 생성하면 AWS에서 네임서버(NS 레코드)가 발급됨
- 가비아에서 구매한 도메인의 네임서버를 **AWS Route 53의 네임서버로 변경**하면, 도메인 관리를 AWS에서 수행 가능

---

### **요약**

1. **DNS 요청은 도메인 주소를 IP 주소로 변환하는 과정**이며, 최적화를 위해 캐시를 먼저 확인
2. **DNS 요청 과정**
    - 캐시 확인 → Root → TLD → Authoritative 네임서버
3. **네임서버는 도메인 정보를 관리하며** 요청에 따라 IP 주소를 반환
4. 캐시와 TTL은 요청 효율성을 높이고 트래픽을 줄이는 중요한 요소
5. AWS Route 53처럼 네임서버를 변경하면 도메인 관리 위치를 조정 가능


<br><br>
<br><br>