---
layout : single
title : "[Network] CORS, HTTP, REST API"
categories: Network
tag : [CS,Network,ê°œë…ì •ë¦¬]
author_profile: true
---

### SSR, CSR

   1. SSR (Server Side Rendering)
         1. Javascript ê°€ ì›¹ í˜ì´ì§€ë¥¼ ì„œë²„ì—ì„œ ë Œë”ë§ (=ì¡°ë¦½ ì™„ë£Œëœ ê°€êµ¬ê°€ ë°°ì†¡ë˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·)
         2. ë„¤ì´ë²„ ë¸”ë¡œê·¸- 2020ë…„ì— ë„ì…, ê²€ìƒ‰ì—”ì§„ ìµœì í™”ë¥¼ ìœ„í•´ ì „ì²´ë¥¼ SSRë¡œ ë³€ê²½
   2. CSR (Client Side Rendering)
         1. â†” SSR 
         2. SSRì´ ì„œë²„ ì¸¡ì—ì„œ Javascript ê°€ í˜ì´ì§€ë¥¼ ë Œë”ë§í•œë‹¤ë©´, CSRì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ Javascript ê°€ í˜ì´ì§€ë¥¼ ë Œë”ë§ (=ê°€êµ¬ì˜ ë¶€í’ˆì´ ë‚˜ëˆ ì„œ ìš´ì†¡ì´ ì‰½ê²Œ ë°°ì†¡ë˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·)
         3. ì›¹ í˜ì´ì§€ì˜ ê³¨ê²©ì´ ë  ë‹¨ì¼ í˜ì´ì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ëƒ„ ì´ë•Œ ì„œë²„ëŠ” ì›¹ í˜ì´ì§€ì™€ í•¨ê»˜ JavaScript íŒŒì¼ì„ ë³´ëƒ„
         4. ê²€ìƒ‰ì—”ì§„ ìµœì í™” - 0ì 
         5. CSRì—ì„œëŠ” SSRê³¼ ë‹¤ë¥´ê²Œ, ì„œë²„ê°€ ì›¹ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë³´ë‚´ì§€ ì•ŠìŠµë‹ˆë‹¤
         6. ì—ì´ì ìŠ¤ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ëŠ” ì´ì ì´ ìˆìŒ. â‡’ ì‚¬ìš©ìì˜ í¸ë¦¬ì„±.
         7. ì˜ˆì œ
            1. Agoda - ê²€ìƒ‰ì—”ì§„ ë…¸ì¶œ ëŒ€ì‹ ì— ë§ˆì¼€íŒ…ìœ¼ë¡œ ë…¸ì¶œ

## CORS

- **Cross-Origin Resource Sharing, êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ **
- ì„œë¡œ ë‹¤ë¥¸ Originì„ ê°€ì§„ Applicationì´ ì„œë¡œì˜ Resourceì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì¤Œ

![image-20240602100808840](../images/2024-05-31-network-02/image-20240602100808840.png)

> ì„œë¡œ ë‹¤ë¥¸ Originì„ ê°€ì§„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìì›ì„ ê³µìœ í•  ë•Œ ë¬¸ì œê°€ ìƒê¹€ â‡’ ë§Œì•½ì— ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë‚´ ì‚¬ì´íŠ¸ì˜ ì´ë¯¸ì§€ë¥¼ ë§í¬ë¡œ ì ‘ê·¼ - ë‹¤ë¥¸ë°ì„œ ì‚¬ìš© ì‹œ í•  ë•Œë§ˆë‹¤ ë¦¬ì†ŒìŠ¤ê°€ ë“¤ê²Œ ë¨ â‡’ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ì™€ ì„œë²„ ê°„ì— HTTPë¥¼ ìš”ì²­ ì‹œ ì„œë²„ê°€ HTTPì™€ ë„ˆëŠ” í—ˆìš© ê°™ì€ ê±¸ ë‹´ì•„ì„œ ê°™ì´ ë³´ë‚´ëŠ”ë° ë§Œì•½ì— Originì´ ë‹¤ë¥¼ ê²½ìš° CORS ì˜¤ë¥˜ ë°œìƒ

- ë¸Œë¼ìš°ì €ê°€ ë‘˜ ë‹¤ [naver.com](http://naver.com) ì¼ ê²½ìš° ë°œìƒí•˜ì§€ ì•Šê³  [naver.com](http://naver.com) ê°€ [kakao.com](http://kkao.com) ì— ìš”ì²­í•  ê²½ìš° ë°œìƒ
- CORSëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ë°œìƒ, íŠ¹ì • ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•œë‹¤ê³  CORSê°€ ì‚¬ë¼ì§€ì§€ ì•ŠìŒ.
- CORS ì„¤ì •ì€ ì„œë²„ì—ì„œ í•¨.
- CORS ì „ì²´ í—ˆìš©í•˜ë©´ ì•ˆë¨ â‡’ ì™œ? â‡’ ë³´ì•ˆì·¨ì•½ì ì„ ë…¸ë¦° ê³µê²©

   ### ì¶œì²˜(Origin)ë€?

   - ì¶œì²˜(Origin)ë€ URL êµ¬ì¡°ì—ì„œ ì‚´í´ë³¸ Protocal, Host, Portë¥¼ í•©ì¹œ ê²ƒ

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%201.png)

   - ì¶œì²˜ë¥¼ ì•Œê³  ì‹¶ì€ ì‚¬ì´íŠ¸ì—ì„œ F12 ëˆ„ë¥´ê³  ì½˜ì†” ì°½ì—Â `location.origin`ë¥¼ ì‹¤í–‰í•˜ë©´ ì¶œì²˜ë¥¼ í™•ì¸

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%202.png)

   - ê°™ì€ ì¶œì²˜ vs ë‹¤ë¥¸ ì¶œì²˜

   í˜„ì¬ ì›¹í˜ì´ì§€ì˜ ì£¼ì†Œê°€ `https://quokkavely.github.io/tech/` ì¼ë•Œ 

   | URL                                       | ê²°ê³¼      | ì´ìœ                       |
   | ----------------------------------------- | --------- | ------------------------- |
   | https://quokkavely.github.io/about        | ê°™ì€ ì¶œì²˜ | Protocol, Host, Port ë™ì¼ |
   | https://quokkavely.github.io/about?q=work | ê°™ì€ ì¶œì²˜ | Protocol, Host, Port ë™ì¼ |
   | https://quokkavely.github.io/about#work   | ê°™ì€ ì¶œì²˜ | Protocol, Host, Port ë™ì¼ |
   | http://quokkavely.github.io               | ë‹¤ë¥¸ ì¶œì²˜ | Protocol ë‹¤ë¦„             |
   | https://quokkavely.github.io:81/about     | ë‹¤ë¥¸ ì¶œì²˜ | Port ë‹¤ë¦„                 |
   | https://quokkavely.heroku.com             | ë‹¤ë¥¸ ì¶œì²˜ | Host ë‹¤ë¦„                 |

   ### ë™ì¼ ì¶œì²˜ ì •ì±…(Same-Origin Policy)

   - ë¸Œë¼ìš°ì €ê°€ ë™ì¼ ì¶œì²˜ ì •ì±…(Same-Origin Policy, SOP)ë¥¼ ì§€ì¼œì„œ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ ê¸ˆì§€í•¨

   ![ì•„ê³ ë‹¤ì—ì„œ ê°œë°œìëª¨ë“œì— ë“¤ì–´ê°€ë©´ corsì„¤ì • ë³¼ ìˆ˜ ìˆìŒ](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%203.png)

   ì•„ê³ ë‹¤ì—ì„œ ê°œë°œìëª¨ë“œì— ë“¤ì–´ê°€ë©´ corsì„¤ì • ë³¼ ìˆ˜ ìˆìŒ

   - ì¥ì 

   - [XSS](https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8C%85)ë‚˜Â [XSRF](https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%9A%94%EC%B2%AD_%EC%9C%84%EC%A1%B0)Â ë“±ì˜ ë³´ì•ˆ ì·¨ì•½ì ì„ ë…¸ë¦° ê³µê²©ì„ ë°©ì–´
   - ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ SOPì˜ ì˜ˆì™¸ ì¡°í•­ì´ **CORS**

## CORS ë™ì‘ì›ë¦¬

   ### Simple request

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%204.png)

   - ë°”ë¡œ ìš”ì²­í•´ì„œ ë°”ë¡œ ì‘ë‹µì„ ë°›ëŠ” ê²ƒ

   ---

   ì•„ë˜ ì¡°ê±´ì— í•´ë‹¹ë˜ëŠ” ê²½ìš°ì—ë§Œ ê°€ëŠ¥í•¨. - 1~3 ë²ˆì˜ ì¡°ê±´ì„ ëª¨ë‘ ì¶©ì¡±í•´ì•¼ í•¨

   1. ìš”ì²­ ë©”ì„œë“œ(method) : 3ê°œ ì¤‘ í•˜ë‚˜ì— í•´ë‹¹ ë˜ì–´ì•¼ í•¨,
      1. GET
      2. HEAD
      3. POST
   2. í—¤ë”
      1. Accept, Accept-Language, Content-Language, Content-Type, DPR, Downlink, Save-Data, Viewport-Width, Width ë¥¼ ì œì™¸í•œ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆ ë¨
   3. Content-Type í—¤ë”
      1. application/x-www-form-urlencoded, multipart/form-data, text/plain ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©
      2. ì•„ë§ˆ JSON íƒ€ì…ì„ ì‚¬ìš©í•  ê²½ìš° Simple requestëŠ” ì‚¬ìš© ëª»í•¨

   ### Preflight request

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%205.png)

   - Preflight ìš”ì²­ì€ ì‹¤ì œ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ê¸° ì „ì—Â **`OPTIONS`ë¼ëŠ” ë©”ì„œë“œ**ë¥¼ í†µí•´ ì‹¤ì œ ìš”ì²­ì„ ì „ì†¡í• ì§€ íŒë‹¨
   - `OPTIONS`Â ë©”ì„œë“œë¡œ ì„œë²„ì— ì˜ˆë¹„ ìš”ì²­ì„ ë¨¼ì € ë³´ë‚´ê³ , ì„œë²„ëŠ” ì´ ì˜ˆë¹„ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œÂ `Access-Control-Allow-Origin`Â í—¤ë”ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì— ë³´ëƒ„
   - ë¸Œë¼ìš°ì €ëŠ” ë‹¨ìˆœ ìš”ì²­ê³¼ ë™ì¼í•˜ê²ŒÂ `Access-Control-Allow-Origin`Â í—¤ë”ë¥¼ í™•ì¸í•´ì„œ CORS ë™ì‘ì„ ìˆ˜í–‰í• ì§€ íŒë‹¨

   ### CORS ì—ëŸ¬ í•´ê²° ë°©ë²•

   - ì•ì—ì„œ ì´ì•¼ê¸° í•œ CORS ë™ì‘ ì›ë¦¬ë¥¼ ë³´ë©´, ì„œë²„ì—ì„œÂ `Access-Control-Allow-Origin`Â í—¤ë”ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì— ë³´ë‚´ëŠ” ë°©ì‹ìœ¼ë¡œ CORS ì—ëŸ¬ë¥¼ í•´ê²°ê°€ëŠ¥.
   - í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ CORS ì—ëŸ¬ë¥¼ í™•ì¸í–ˆë‹¤ë©´, ì„œë²„ì—Â `Access-Control-Allow-Origin`Â ë“± CORSë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ ì‘ë‹µ í—¤ë”ë¥¼ í¬í•¨í•´ ë‹¬ë¼ê³  ìš”ì²­í•´ì•¼ í•¨.

   ### HTTP ìš”ì²­ í—¤ë”

   - CORSë¥¼ ìœ„í•´ì„œ, ë¸Œë¼ìš°ì €ì—ì„œ ì„œë²„ë¡œ ìš”ì²­í•˜ëŠ” í—¤ë”

   - ìš”ì²­ í—¤ë”ë“¤ì€ ë³„ë„ë¡œ ëª…ì‹œí•´ ì£¼ì§€ ì•Šì•„ë„ ë¸Œë¼ìš°ì €ì—ì„œÂ `OPTIONS`Â ìš”ì²­ì— ì¶”ê°€

   - OPTIONSâ†’ ì ˆëŒ€ ê¹Œë¨¹ìœ¼ë©´ ì•ˆë¨.

      1. Origin: <origin>
         1. `Origin`Â í—¤ë”ëŠ” ìš”ì²­í•˜ëŠ” ëŒ€ìƒì˜ ì¶œì²˜ë¥¼ ë‚˜íƒ€ëƒ„
         2. APIë¥¼ í˜¸ì¶œí•˜ëŠ” í˜ì´ì§€ì˜ ì¶œì²˜ ê°’ì´ ì €ì¥ë©ë‹ˆë‹¤.
      2. Access-Control-Request-Method: <method>
         1. `Access-Control-Request-Method`Â í—¤ë”ëŠ” ì‹¤ì œ ìš”ì²­ì´ ì–´ë–¤ HTTP ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ì„œë²„ì— ì•Œë ¤ì£¼ê¸° ìœ„í•´ ì‚¬ìš©
      3. Access-Control-Request-Headers: <field-name>[, <field-name>]
         1. `Access-Control-Request-Headers`Â í—¤ë”ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ë³´ë‚´ëŠ” ì»¤ìŠ¤í…€ í—¤ë” ì´ë¦„ì„ ì„œë²„ì— ì•Œë ¤ì£¼ê¸° ìœ„í•´ ì‚¬ìš©

### HTTP ì‘ë‹µí—¤ë”

ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ CORSë¥¼ í•´ê²° í•  ìˆ˜ ìˆìŒ

#### **ì‘ë‹µí—¤ë” ì¢…ë¥˜**

| HTTP ì‘ë‹µ í—¤ë”                                               | description                                                  | Syntax                                                       | ë¹„ê³                                                          |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Access-Control-Allow-Origin: <origin>                        | *                                                            | í—¤ë”ì— ì‘ì„±ëœ ì¶œì²˜ë§Œ ë¸Œë¼ìš°ì €ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš© | Access-Control-Allow-Origin: *                               |
| Access-Control-Allow-Origin: <origin>                        |                                                              |                                                              |                                                              |
| Access-Control-Allow-Origin: null                            |                                                              |                                                              |                                                              |
| Access-Control-Allow-Methods: <method>[, <method>]*          | ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ë•Œ í—ˆìš©ë˜ëŠ” ë©”ì„œë“œë¥¼ ì§€ì •                    | Access-Control-Allow-Methods:                                |                                                              |
| POST, GET, OPTIONS                                           |                                                              |                                                              |                                                              |
| Access-Control-Allow-Methods: *                              | preflight request ëŒ€í•œ ì‘ë‹µ(Access-Control-Request-Method)   |                                                              |                                                              |
| Access-Control-Expose-Headers                                | cross-origin requestì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‘ë‹µ í—¤ë”ë¥¼ ì§€ì • ê°€ëŠ¥ | Access-Control-Expose-Headers: [<header-name>[, <header-name>]*] |                                                              |
| Access-Control-Expose-Headers: *                             | cross-origin requestì— ëŒ€í•œ ì‘ë‹µ                             |                                                              |                                                              |
| Access-Control-Allow-Headers                                 | ì‹¤ì œ ìš”ì²­ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” HTTP í—¤ë”ì˜ ëª©ë¡ì„ ë‚˜ì—´           | Access-Control-Allow-Headers: <header-name>[, <header-name>]* |                                                              |
| Access-Control-Allow-Headers: *                              | preflight requestì˜ ì‘ë‹µì— ì‚¬ìš©ë˜ëŠ” í—¤ë”,                    |                                                              |                                                              |
| í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­í•  ë•Œ ì–´ë–¤ í—¤ë”ë“¤ì„ í¬í•¨í•  ìˆ˜ ìˆëŠ”ì§€ ì„œë²„ê°€ ëª…ì‹œí•˜ëŠ” ê²ƒ. |                                                              |                                                              |                                                              |
| Access-Control-Max-Age                                       | preflight requestì˜ ê²°ê³¼ë¥¼ ì–¼ë§ˆë‚˜ ì˜¤ë˜ ìºì‹œí•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ëƒ„ | Access-Control-Max-Age: <delta-seconds>                      | preflight requestì˜ ê²°ê³¼(ì¦‰,Â Access-Control-Allow-MethodsÂ ë°Â Access-Control-Allow-HeadersÂ í—¤ë”ì— í¬í•¨ëœ ì •ë³´) |
| Access-Control-Allow-Credentials:true                        | Request.credentialsê°€ includeì¼ë•Œ, ë¸Œë¼ìš°ì €ë“¤ì´ ì‘ë‹µì„ í”„ë¡œíŠ¸ì—”ë“œ ìë°”ìŠ¤íŠ¸ë¦½íŠ¸ ì½”ë“œì— ë…¸ì¶œí• ì§€ì— ëŒ€í•´ ì•Œë ¤ | Access-Control-Allow-Credentials: true, falseì¼ ê²½ìš° í—¤ë” ìƒëµ | Access-Control-Allow-CredentialsÂ ê°’ì´Â trueÂ ì¼ ê²½ìš°ì—ë§Œ ë¸Œë¼ìš°ì €ë“¤ì€ í”„ë¡œíŠ¸ì—”ë“œ ìë°”ìŠ¤íŠ¸ë¦½íŠ¸ì— ì‘ë‹µì„ ë…¸ì¶œí•¨ |

1. **Access-Control-Allow-Origin: <origin> | ***

   1.1 í—¤ë”ì— ì‘ì„±ëœ ì¶œì²˜ë§Œ ë¸Œë¼ìš°ì €ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©

   1.2 ì‚¬ìš© ë°©ë²•

      - Access-Control-Allow-Origin: https://quokkavely.github.io
      - https://quokkavely.github.ioÂ í˜ì´ì§€ì—ì„œ ë¸Œë¼ìš°ì €ëŠ” ì„œë²„ ì‘ë‹µìœ¼ë¡œ ì˜¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆìŒ
      - Access-Control-Allow-Origin: *  : *(ì™€ì¼ë“œì¹´ë“œ)ê°€ ì‘ì„±ë˜ì—ˆë‹¤ë©´ ë¸Œë¼ìš°ì €ëŠ” ì¶œì²˜ì— ìƒê´€ì—†ì´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼ ê°€ëŠ¥

   1.3 ì˜ˆì œ

      ```java
      fetch('http://localhost:3001/cors', {
        method: 'PUT',
      }).then(function(response) {
      }).catch(function(error) {
      })
      ```

      - `Access-Control-Allow-Origin`Â í—¤ë”ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šì€ ì„œë²„ì— API í˜¸ì¶œ ì‹œ ì—ëŸ¬ ë°œìƒ í•¨.

2. **Access-Control-Allow-Methods: <method>[, <method>]***

   2.1 ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” HTTP ë©”ì„œë“œë¥¼ ì§€ì •í•´ ì£¼ëŠ” í—¤ë”

   2.2 Access-Control-Allow-MethodsÂ í—¤ë”ì—Â GET,Â PUT,Â POST,Â DELETEÂ ë“±ì˜ HTTP ë©”ì„œë“œë¥¼Â ,ë¡œ êµ¬ë¶„í•˜ì—¬ ë„˜ê²¨ì¤Œ

      Ex) `Access-Control-Allow-Methods: GET, PUT`

   2.3 ì˜ˆì œ

      ```java
      fetch('http://localhost:3001/cors', {
        method: 'PUT',
      }).then(function(response) {
      }).catch(function(error) {
      })
      ```

   2.4 `Access-Control-Allow-Methods`Â í—¤ë”ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šì€ ì„œë²„ì— APIë¥¼ í˜¸ì¶œâ‡’ ì—ëŸ¬ ë°œìƒ,  

      ì‘ë‹µ í—¤ë”ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•¨.

      ```java
      @RestController
      public class CorsController {
      
          @CrossOrigin(origins = "*", methods = {RequestMethod.OPTIONS, RequestMethod.PUT})
          @RequestMapping(value = "/cors", method = RequestMethod.OPTIONS)
          public ResponseEntity<?> handleOptionsRequest() {
              return ResponseEntity.ok().build();
          }
      
          @CrossOrigin(origins = "*", methods = {RequestMethod.OPTIONS, RequestMethod.PUT})
          @RequestMapping(value = "/cors", method = RequestMethod.PUT)
          public ResponseEntity<?> handlePutRequest() {
              return ResponseEntity.ok().build();
          }
      }
      ```

      `Access-Control-Allow-Origin`ëŠ”Â `*`ë¡œ ëª¨ë“  ì¶œì²˜ë¥¼ í—ˆìš©í•œ ìƒíƒœì´ê³ , ë¸Œë¼ìš°ì €ì˜ ìš”ì²­ í—¤ë”ì— í¬í•¨ëœÂ `Access-Control-Request-Method`Â í—¤ë” ê°’ì„ ê·¸ëŒ€ë¡œÂ `Access-Control-Allow-Methods`Â í—¤ë”ì— ì¶”ê°€

3. Access-Control-**Expose**-Headers: <header-name>[, <header-name>]*

   3.1 `Access-Control-Allow-Headers` í—¤ë”ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ì œ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ì„œë²„ì— ë³´ë‚´ëŠ” **ì‚¬ì „ ìš”ì²­(preflight request)ì—ì„œ ì‚¬ìš©**

   3.2 ì´ í—¤ë”ëŠ” ì„œë²„ê°€ í—ˆìš©í•˜ëŠ” ìš”ì²­ í—¤ë”ì˜ ëª©ë¡ì„ ì§€ì • = í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­í•  ë•Œ ì–´ë–¤ í—¤ë”ë“¤ì„ í¬í•¨í•  ìˆ˜ ìˆëŠ”ì§€ ì„œë²„ê°€ ëª…ì‹œ

   3.3 ì‚¬ìš©ë°©ë²• : `Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header`

   3.4 ì˜ˆì œ

      ```java
      @RestController
      public class CorsController {
      
          @RequestMapping(value = "/cors", method = RequestMethod.OPTIONS)
          public ResponseEntity<?> handleOptionsRequest(@RequestHeader("Access-Control-Request-Method") String requestMethod) {
              HttpHeaders headers = new HttpHeaders();
              headers.set("Access-Control-Allow-Origin", "*");
              headers.set("Access-Control-Allow-Methods", requestMethod);
              return ResponseEntity.ok().headers(headers).build();
          }
      
          @RequestMapping(value = "/cors", method = RequestMethod.PUT)
          public ResponseEntity<?> handlePutRequest() {
              HttpHeaders headers = new HttpHeaders();
              headers.set("Access-Control-Allow-Origin", "*");
              headers.set("Access-Control-Expose-Headers", "X-Custom-Beomy");
              headers.set("X-Custom-Beomy", "Bemoy");
              return ResponseEntity.ok().headers(headers).build();
          }
      }
      ```

      3.4.1. ì„œë²„ì—ì„œ `Access-Control-Expose-Headers`Â í—¤ë”ì—Â `X-Custom-Beomy`ë¥¼ ì¶”ê°€í•´ ì£¼ê³ ,Â `X-Custom-Beomy`Â í—¤ë”ì— ê°’ì„ ë‹´ì•„ ì‘ë‹µì„ í•˜ë©´

      3.4.2 ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì•„ë˜ì½”ë“œë¥¼ ì‹¤í–‰í•´ì„œ `X-Custom-Beomy`Â í—¤ë” ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë¨

         ```java
         fetch('http://localhost:3001/cors', {
           method: 'PUT',
         }).then(function(response) {
           console.log(response.headers.get('X-Custom-Beomy')) // Beomy
         }).catch(function(error) {
         })
         ```

      3.4.3. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì ‘ê·¼í•  í—¤ë”ë¥¼ ëª…ì‹œí•´ ì£¼ì§€ ì•Šìœ¼ë©´, ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œÂ `X-Custom-Beomy`Â í—¤ë” ê°’ì€Â `undefined`

4. Access-Control-**Allow**-Headers: <header-name>[, <header-name>]*

   4.1 ë¸Œë¼ìš°ì €ì—ì„œ ë³´ë‚´ëŠ” ìš”ì²­ í—¤ë”ì— í¬í•¨ëœÂ `Access-Control-Request-Headers`Â í—¤ë”ì— ëŒ€í•œ ì‘ë‹µ ê²°ê³¼

   4.2 ì´ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë²„ëŠ” ì¶”ê°€ í—¤ë”ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œê°€ëŠ¥ 

   4.3 ì‚¬ìš©ë°©ë²•

   4.4 ì˜ˆì‹œ

      1. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì»¤ìŠ¤í…€ í—¤ë”ë¥¼ ì„œë²„ì— ì „ë‹¬í•˜ê²Œ ë˜ë©´,Â `OPTIONS`Â ìš”ì²­ í—¤ë”ì˜Â `Access-Control-Request-Headers`Â í—¤ë”ì— ì»¤ìŠ¤í…€ í—¤ë” ì´ë¦„ì´ ì¶”ê°€ë©ë‹ˆë‹¤. ì„œë²„ì—ì„œëŠ”Â `Access-Control-Request-Headers`ì— ì‘ì„±ëœ ê°’ì„ ë³´ê³ Â `Access-Control-Allow-Headers`Â ì‘ë‹µ í—¤ë”ì— ì»¤ìŠ¤í…€ í—¤ë” ì´ë¦„ì„ ëª…ì‹œí•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

      2. `Access-Control-Allow-Headers: X-Custom-Request`

      3. ì•„ë˜ ì½”ë“œë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•˜ì—¬,Â `Access-Control-Allow-Headers`Â ì²˜ë¦¬ë˜ì§€ ì•Šì€ APIë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´,

         ```java
         fetch('http://localhost:3001/cors', {
           method: 'PUT',
           headers: {
             'X-Custom-Request': 'Beomy',
           }
         }).then(function(response) {
         }).catch(function(error) {
         })
         ```

      4. ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒ

         ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%206.png)

      5. ì‘ë‹µí—¤ë” ì¶”ê°€ í•´ì¤˜ì•¼í•¨

         ```java
         @RestController
         public class CorsController {
         
             @RequestMapping(value = "/cors", method = RequestMethod.OPTIONS)
             public ResponseEntity<?> handleOptionsRequest(
                     @RequestHeader("Access-Control-Request-Method") String requestMethod,
                     @RequestHeader("Access-Control-Request-Headers") String requestHeaders) {
                 HttpHeaders headers = new HttpHeaders();
                 headers.set("Access-Control-Allow-Origin", "*");
                 headers.set("Access-Control-Allow-Methods", requestMethod);
                 headers.set("Access-Control-Allow-Headers", requestHeaders);
                 return ResponseEntity.ok().headers(headers).build();
             }
         
             @RequestMapping(value = "/cors", method = RequestMethod.PUT)
             public ResponseEntity<?> handlePutRequest(@RequestHeader("X-Custom-Request") String customRequest) {
                 System.out.println(customRequest); // Beomy
                 HttpHeaders headers = new HttpHeaders();
                 headers.set("Access-Control-Allow-Origin", "*");
                 return ResponseEntity.ok().headers(headers).build();
             }
         }
         ```

         - ë¸Œë¼ìš°ì €ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œÂ `X-Custom-Request`Â í—¤ë”ì—Â `Beomy`Â ê°’ì„ ì„œë²„ì— ì „ë‹¬í•˜ì˜€ê³ , ì„œë²„ì—ì„œëŠ”Â `Access-Control-Allow-Headers`Â í—¤ë”ì—Â `Access-Control-Request-Headers`Â í—¤ë” ê°’ì„ ì €ì¥í•˜ì—¬ ì„œë²„ì—ì„œÂ `X-Custom-Request`Â ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œ ì½”ë“œ

5. Access-Control-Max-Age: <delta-seconds> - ì–¸ì œê¹Œì§€ ì‚´ì•„ë‚¨ì„ ìˆ˜ ìˆëŠ”ì§€

   1. ì‚¬ìš©ë°©ë²• : ì•„ë˜ì™€ ê°™ì´ ì´ˆ ë‹¨ìœ„ë¡œ ìºì‹œ ì‹œê°„ì„ ì„¤ì •í•©ë‹ˆë‹¤

      1. `Access-Control-Max-Age: 60`
         - ìœ„ì˜ ì½”ë“œëŠ” 60ì´ˆ ë™ì•ˆ preflight ìš”ì²­ì„ ìºì‹œ í•˜ëŠ” ì½”ë“œ.
         - 60ì´ˆ ë™ì•ˆÂ `OPTIONS`Â ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆë¹„ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•ŠìŒ

   2. ì˜ˆì œ

      ```java
      fetch('http://localhost:3001/cors', {
        method: 'PUT'
      }).then(function(response) {
      }).catch(function(error) {
      })
      ```

      ```java
      @RestController
      public class CorsController {
      
          @RequestMapping(value = "/cors", method = RequestMethod.OPTIONS)
          public ResponseEntity<?> handleOptionsRequest(
                  @RequestHeader("Access-Control-Request-Method") String requestMethod) {
              HttpHeaders headers = new HttpHeaders();
              headers.set("Access-Control-Allow-Origin", "*");
              headers.set("Access-Control-Allow-Methods", requestMethod);
              headers.set("Access-Control-Max-Age", "60");
              return ResponseEntity.ok().headers(headers).build();
          }
      
          @RequestMapping(value = "/cors", method = RequestMethod.PUT)
          public ResponseEntity<?> handlePutRequest() {
              HttpHeaders headers = new HttpHeaders();
              headers.set("Access-Control-Allow-Origin", "*");
              return ResponseEntity.ok().headers(headers).build();
          }
      }
      ```

6. Access-Control-Allow-Credentials: true

   1. ì¸ì¦ì •ë³´ë¥¼ ë‹´ì•„ì„œ ë³´ë‚¼ ìˆ˜ ìˆëŠ”ì§€ ì˜¤ë¥˜ê°€ë‚˜ë©´ trueë¡œ ë³´ë‚´ë©´ í•´ê²°í•  ìˆ˜ ì‡ìŒ. (Credential: ìê²©ì¦ëª…)

   2. ë¸Œë¼ìš°ì €ì—ì„œ ì¿ í‚¤ê°™ì€ ê±¸ ì‚¬ìš©í•˜ëŠ”ë° í—ˆìš©í•˜ëŠ”ì§€ë¥¼ ë‹´ëŠ” ê²ƒ.

      - ê°œë°œìë„êµ¬ì—ì„œ ì¿ í‚¤í™•ì¸ ê°€ëŠ¥. ì¿ í‚¤ëŠ” ë¸Œë¼ìš°ì €ê°€ ê´€ë¦¬

      ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%207.png)

   3. ì‚¬ìš©ë°©ë²•

      `Access-Control-Allow-Credentials: true`

   4. ì˜ˆì œ

      ```java
      fetch('http://localhost:3001/cors', {
        method: 'PUT',
        credentials: 'include'
      }).then(function(response) {
      }).catch(function(error) {
      })
      ```

      1. ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒ

         ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%208.png)

      2. ì„œë²„ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì‘ë‹µ í—¤ë”ë¥¼ ì¶”ê°€í•´ ì£¼ì–´ì•¼ í•¨

         ```java
         @RestController
         public class CorsController {
         
             @RequestMapping(value = "/cors", method = RequestMethod.OPTIONS)
             public ResponseEntity<?> handleOptionsRequest(
                     @RequestHeader("Access-Control-Request-Method") String requestMethod) {
                 HttpHeaders headers = new HttpHeaders();
                 headers.set("Access-Control-Allow-Origin", "https://www.google.com");
                 headers.set("Access-Control-Allow-Methods", requestMethod);
                 headers.set("Access-Control-Allow-Credentials", "true");
                 return ResponseEntity.ok().headers(headers).build();
             }
         
             @RequestMapping(value = "/cors", method = RequestMethod.PUT)
             public ResponseEntity<?> handlePutRequest() {
                 HttpHeaders headers = new HttpHeaders();
                 headers.set("Access-Control-Allow-Origin", "https://www.google.com");
                 headers.set("Access-Control-Allow-Credentials", "true");
                 return ResponseEntity.ok().headers(headers).build();
             }
         }
         ```

      3. `Access-Control-Allow-Credentials: true`Â ì¶”ê°€ ë¿ë§Œ ì•„ë‹ˆë¼,Â `Access-Control-Allow-Origin`Â í—¤ë”ë„Â `*`(ì™€ì¼ë“œì¹´ë“œ)ê°€ ì•„ë‹Œ ì¶œì²˜ë¥¼ ëª…ì‹œí•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

## HTTP(HyperText Transfer Protocol)

- HTMLê³¼ ê°™ì€ ë¬¸ì„œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ [Application Layer](https://en.wikipedia.org/wiki/Application_layer) í”„ë¡œí† ì½œ

- HTTPëŠ” ì›¹ ë¸Œë¼ìš°ì €ì™€ ì›¹ ì„œë²„ì˜ ì†Œí†µì„ ìœ„í•´ ë””ìì¸ ë¨.

- ì „í†µì ì¸ í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ HTTP messages ì–‘ì‹ì— ë§ì¶° ìš”ì²­ì„ ë³´ë‚´ë©´, ì„œë²„ë„ HTTP messages ì–‘ì‹ì— ë§ì¶° ì‘ë‹µí•¨

- HTTPëŠ” íŠ¹ì • ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•ŠëŠ” íŠ¹ì§•ì´ ìˆìŒ ,**Stateless(ë¬´ìƒíƒœì„±)**

  <aside>
  ğŸ’— Stateless
  HTTPëŠ” ë¬´ìƒíƒœì„±ì´ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ í†µì‹ ì„ ì£¼ê³ ë°›ëŠ” ê³¼ì •ì—ì„œ, HTTPê°€ í´ë¼ì´ì–¸íŠ¸ë‚˜ ì„œë²„ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ì§€ ì•ŠìŒ


  ìƒíƒœë¥¼ ê¸°ì–µí•˜ê¸° ìœ„í•´ì„œ ë¸Œë¼ìš°ì €ì˜ ê³µê°„ì„ ì‚¬ìš©

  Ex ) ì¿ í‚¤,ì¸ì¦ì •ë³´ë¥¼ ë‹¤ë¥¸ í˜•íƒœë¡œ ë°”ê¿ˆ(ë¯¼ê°í•œì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ìœ¼ë‹ˆ í† í°í˜•íƒœë¡œ ë‹´ -JWT (JSON WEB TOKEN)

  </aside>

### HTTP Message

1. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì—ì„œ ë°ì´í„°ê°€ êµí™˜ë˜ëŠ” ë°©ì‹

2. ë‘ê°€ì§€ ìœ í˜•

   1. ìš”ì²­(Requests)
   2. ì‘ë‹µ(Responses)

3. êµ¬ì¡°

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%209.png)

   - ëª‡ ì¤„ì˜ í…ìŠ¤íŠ¸ ì •ë³´ë¡œ êµ¬ì„±
   - ì§ì ‘ ì‘ì„± í•„ìš” ì—†ìŒ â‡’ êµ¬ì„±íŒŒì¼, API, ê¸°íƒ€ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ì™„ì„±í•¨
   - ìš”ì²­ê³¼ ì‘ë‹µì€ ë‹¤ìŒê³¼ ê°™ì€ ìœ ì‚¬í•œ êµ¬ì¡°ë¥¼ ê°€ì§
     1. **start line**
        1. ìš”ì²­ì´ë‚˜ ì‘ë‹µì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ„ 
        2. í•­ìƒ ì²« ë²ˆì§¸ ì¤„ì— ìœ„ì¹˜
        3. ì‘ë‹µì—ì„œëŠ” status lineì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.
     2. **empty line** - í—¤ë”ì™€ ë³¸ë¬¸ì„ êµ¬ë¶„í•˜ëŠ” ì—­í• .
     3. **body**
        1. ìš”ì²­ê³¼ ê´€ë ¨ëœ ë°ì´í„°ë‚˜ ì‘ë‹µê³¼ ê´€ë ¨ëœ ë°ì´í„° ë˜ëŠ” ë¬¸ì„œë¥¼ í¬í•¨
        2. ìš”ì²­ê³¼ ì‘ë‹µì˜ ìœ í˜•ì— ë”°ë¼ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©
     4. ì´ ì¤‘ start lineê³¼ HTTP headersë¥¼ ë¬¶ì–´ ìš”ì²­ì´ë‚˜ ì‘ë‹µì˜ í—¤ë“œ(head)ë¼ê³  í•˜ê³ , [payload](https://ko.wikipedia.org/wiki/%ED%8E%98%EC%9D%B4%EB%A1%9C%EB%93%9C_(%EC%BB%B4%ED%93%A8%ED%8C%85))ëŠ” bodyë¼ê³  ì´ì•¼ê¸° í•¨

### ìš”ì²­

HTTP ìš”ì²­ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë³´ë‚´ëŠ” ë©”ì‹œì§€

### 1. start line

- 3ê°€ì§€ ìš”ì†Œê°€ ìˆìŒ
  1. Mehtod = HTTP METHOD â‡’ ìˆ˜í–‰í•  ì‘ì—…ì´ë‚˜ ë°©ì‹ì„ ì„¤ëª…
     1. GET, POST, DELETE, PUT = CRUD
     2. HEAD or OPTIONS 
  2. ìì› = ìš”ì²­í•˜ëŠ” ì£¼ì†Œ
     1. ì¼ë°˜ì ìœ¼ë¡œ (URLì´ë‚˜ URI) ë˜ëŠ” í”„ë¡œí† ì½œ, í¬íŠ¸, ë„ë©”ì¸ì˜ ì ˆëŒ€ ê²½ë¡œ
     2. ì˜ˆì œ
        1. origin í˜•ì‹ 
           - `?` ì™€ ì¿¼ë¦¬ ë¬¸ìì—´ì´ ë¶™ëŠ” ì ˆëŒ€ ê²½ë¡œ
           - POST, GET, HEAD, OPTIONS ë“±ì˜ methodì™€ í•¨ê»˜ ì‚¬ìš©
           - `POST / HTTP 1.1 GET /background.png HTTP/1.0 HEAD /test.html?query=alibaba HTTP/1.1 OPTIONS /anypage.html HTTP/1.0`
        2. absolute í˜•ì‹ 
           - ì™„ì „í•œ URL í˜•ì‹ìœ¼ë¡œ, í”„ë¡ì‹œì— ì—°ê²°í•˜ëŠ” ê²½ìš° ëŒ€ë¶€ë¶„ GET methodì™€ í•¨ê»˜ ì‚¬ìš©
           - `GET <http://developer.mozilla.org/en-US/docs/Web/HTTP/Messages> HTTP/1.1`
        3. authority í˜•ì‹
           - ë„ë©”ì¸ ì´ë¦„ê³¼ í¬íŠ¸ ë²ˆí˜¸ë¡œ ì´ë£¨ì–´ì§„ URLì˜ authority component
           - HTTP í„°ë„ì„ êµ¬ì¶•í•˜ëŠ” ê²½ìš°, `CONNECT`ì™€ í•¨ê»˜ ì‚¬ìš©ê°€ëŠ¥
             `CONNECT developer.mozilla.org:80 HTTP/1.1`
  3. start lineì— HTTP ë²„ì „ì„ í•¨ê»˜ ì…ë ¥
     1. HTTP ë²„ì „ì— ë”°ë¼ HTTP messageì˜ êµ¬ì¡°ê°€ ë‹¬ë¼ì§

### Header

- ê¸°ë³¸êµ¬ì¡°ì— ë”°ë¦„

- í—¤ë” ì´ë¦„(ëŒ€ì†Œë¬¸ì êµ¬ë¶„ì´ ì—†ëŠ” ë¬¸ìì—´), ì½œë¡ ( : ), ê°’ì„ ì…ë ¥

- ê°’ì€ í—¤ë”ì— ë”°ë¼ ë‹¤ë¦„ â†’ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ í—¤ë”ê°€ ìˆê³ , ë‹¤ìŒê³¼ ê°™ì´ ê·¸ë£¹ì„ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ

  ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2010.png)

1. General headers 
   1. ë©”ì‹œì§€ ì „ì²´ì— ì ìš©ë˜ëŠ” í—¤ë”, bodyë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ì™€ëŠ” ê´€ë ¨ì´ ì—†ëŠ” í—¤ë”
2. Request headers
   1. fetchë¥¼ í†µí•´ ê°€ì ¸ì˜¬ ë¦¬ì†ŒìŠ¤ë‚˜ í´ë¼ì´ì–¸íŠ¸ ìì²´ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” í—¤ë”ë¥¼ ì˜ë¯¸
   2. User-Agent, Accept-Type, Accept-Languageê³¼ ê°™ì€ í—¤ë”ëŠ” ìš”ì²­ì„ ë³´ë‹¤ êµ¬ì²´í™” í•¨. 
   3. Refererì²˜ëŸ¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê±°ë‚˜ If-Noneê³¼ ê°™ì´ ì¡°ê±´ì— ë”°ë¼ ì œì•½ì„ ì¶”ê°€ê°€ëŠ¥
3. Representation headers  (=ì´ì „ì— Entity headersë¼ ë¶ˆë¦¼)
   1. bodyì— ë‹´ê¸´ ë¦¬ì†ŒìŠ¤ì˜ ì •ë³´(ì½˜í…ì¸  ê¸¸ì´, MIME íƒ€ì… ë“±)ë¥¼ í¬í•¨í•˜ëŠ” í—¤ë”

### Body

- HTTP messages êµ¬ì¡°ì˜ ë§ˆì§€ë§‰ì— ìœ„ì¹˜,
- ëª¨ë“  ìš”ì²­ì— bodyê°€ í•„ìš”í•˜ì§„ ì•ŠìŒ.(GET, HEAD, DELETE, OPTIONSì²˜ëŸ¼ ì„œë²„ì— ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” ê²½ìš°ëŠ” í•„ìš”ì—†ìŒ) â‡’ **Requestì¼ ë•Œ get ìš”ì²­ì€ ë°”ë””ì— ì–´ë–¤ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ìŒ (getì€ ì¡°íšŒì´ê¸° ë•Œë¬¸ì—)**
- POSTë‚˜ PUTê³¼ ê°™ì€ ì¼ë¶€ ìš”ì²­ì€ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- ë³´í¸ì ìœ¼ë¡œ JSON ìœ¼ë¡œ ë³´ëƒ„
- ë‘ ì¢…ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ
  1. Single-resource bodies(ë‹¨ì¼-ë¦¬ì†ŒìŠ¤ ë³¸ë¬¸): 
     1. í—¤ë” ë‘ ê°œ(Content-Typeê³¼ Content-Length)ë¡œ ì •ì˜ëœ ë‹¨ì¼ íŒŒì¼ë¡œ êµ¬ì„±
  2. Multiple-resource bodies(ë‹¤ì¤‘-ë¦¬ì†ŒìŠ¤ ë³¸ë¬¸) : 
     1. ì—¬ëŸ¬ íŒŒíŠ¸ë¡œ êµ¬ì„±ëœ ë³¸ë¬¸ì—ì„œëŠ” ê° íŒŒíŠ¸ë§ˆë‹¤ ë‹¤ë¥¸ ì •ë³´ë¥¼ ì§€ë‹˜ 
     2. ë³´í†µ [HTML form](https://developer.mozilla.org/en-US/docs/Learn/Forms)ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. - formì€ ì´ì œ ì•ˆì”€.

### ì‘ë‹µ

### **Status line**

ì‘ë‹µì˜ ì²« ì¤„ì€ Status lineì´ë¼ê³  ë¶€ë¥´ë©°, ë‹¤ìŒì˜ ì •ë³´ë¥¼ í¬í•¨

1. í˜„ì¬ í”„ë¡œí† ì½œì˜ ë²„ì „(HTTP/1.1)
2. ìƒíƒœ ì½”ë“œ - ìš”ì²­ì˜ ê²°ê³¼ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (200, 302, 404 ë“±)
3. ìƒíƒœ í…ìŠ¤íŠ¸ - ìƒíƒœ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…

Status lineì€ `HTTP/1.1 404 Not Found.`ì²˜ëŸ¼ ìƒê²¼ìŠµë‹ˆë‹¤.

### **Headers**

ì‘ë‹µì— ë“¤ì–´ê°€ëŠ” HTTP headersëŠ” ìš”ì²­ í—¤ë”ì™€ ë™ì¼í•œ êµ¬ì¡°ë¥¼ ê°€ì§

ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ

![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2011.png)

1. General headers
   1. ë©”ì‹œì§€ ì „ì²´ì— ì ìš©ë˜ëŠ” í—¤ë”ë¡œ, bodyë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ì™€ëŠ” ê´€ë ¨ì´ ì—†ëŠ” í—¤ë”
2. Response headers 
   1. ìœ„ì¹˜ ë˜ëŠ” ì„œë²„ ìì²´ì— ëŒ€í•œ ì •ë³´(ì´ë¦„, ë²„ì „ ë“±)ì™€ ê°™ì´ ì‘ë‹µì— ëŒ€í•œ ë¶€ê°€ì ì¸ ì •ë³´ë¥¼ ê°–ëŠ” í—¤ë”ë¡œ, Vary, Accept-Rangesì™€ ê°™ì´ ìƒíƒœ ì¤„ì— ë„£ê¸°ì—ëŠ” ê³µê°„ì´ ë¶€ì¡±í–ˆë˜ ì¶”ê°€ ì •ë³´ë¥¼ ì œê³µ
3. Representation headers 
   1. bodyì— ë‹´ê¸´ ë¦¬ì†ŒìŠ¤ì˜ ì •ë³´(ì½˜í…ì¸  ê¸¸ì´, MIME íƒ€ì… ë“±)ë¥¼ í¬í•¨í•˜ëŠ” í—¤ë”

### Body

201, 204ì™€ ê°™ì€ ìƒíƒœ ì½”ë“œë¥¼ ê°€ì§€ëŠ” ì‘ë‹µì—ëŠ” ë³¸ë¬¸ì´ í•„ìš”ì—†ìŒ. 

ì‘ë‹µì˜ bodyëŠ” ë‘ ì¢…ë¥˜

1. Single-resource bodies(ë‹¨ì¼-ë¦¬ì†ŒìŠ¤ ë³¸ë¬¸)
   - ê¸¸ì´ê°€ ì•Œë ¤ì§„ ë‹¨ì¼-ë¦¬ì†ŒìŠ¤ ë³¸ë¬¸ì€ ë‘ ê°œì˜ í—¤ë”(Content-Type, Content-Length)ë¡œ ì •ì˜
   - ê¸¸ì´ë¥¼ ëª¨ë¥´ëŠ” ë‹¨ì¼ íŒŒì¼ë¡œ êµ¬ì„±ëœ ë‹¨ì¼-ë¦¬ì†ŒìŠ¤ ë³¸ë¬¸ì€ Transfer-Encodingì´ `chunked`ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©°, íŒŒì¼ì€ chunkë¡œ ë‚˜ë‰˜ì–´ ì¸ì½”ë”©ë˜ì–´ ìˆìŒ
2. Multiple-resource bodies(ë‹¤ì¤‘-ë¦¬ì†ŒìŠ¤ ë³¸ë¬¸) 
   - ì„œë¡œ ë‹¤ë¥¸ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” body

### HTTP ìƒíƒœ ì½”ë“œ - ì™¸ìš°ê¸°

ì˜¤ë¥˜ë©”ì„¸ì§€ëŠ” ìŠ¤í”„ë§ì—ì„œ ENUM Class ë§Œë“¤ì–´ì„œ ì‚¬ìš©
ë” ë§ì€ HTTP ìƒíƒœì½”ë“œëŠ” ë§í¬ì°¸ì¡° : https://developer.mozilla.org/ko/docs/Web/HTTP/Status

âœ”ï¸âœ¨í•˜ê¸° í‘œëŠ” ê¼­ ì™¸ì›Œì•¼í•˜ëŠ” ìƒíƒœì½”ë“œ!

| HTTP ìƒíƒœì½”ë“œ |                            |      | name                | description                                                  |
| ------------- | -------------------------- | ---- | ------------------- | ------------------------------------------------------------ |
| 100ë²ˆëŒ€       | ì–´ë–¤ ì •ë³´ë¥¼ í‘œì‹œí•  ë•Œ ì‚¬ìš© |      |                     |                                                              |
| 200ë²ˆëŒ€       | ì„±ê³µí–ˆì„ë•Œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ   | 200  | OK                  | ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.                            |
|               |                            | 201  | Created             | ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.          |
|               |                            | 202  | Accepted            | ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆëŠ”ë°, ì™„ì „íˆ ì²˜ë¦¬ë˜ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤.             |
|               |                            | 204  | No Content          | ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì—ˆìœ¼ë‚˜, ì‘ë‹µí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.    |
| 300ë²ˆëŒ€       | Redirection                | 301  | Moved Permanently   | ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ì—ˆìŒì„ ì•Œë ¤ì¤ë‹ˆë‹¤. ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ë¥¼ í•¨ê»˜ ë°˜í™˜í•©ë‹ˆë‹¤. |
|               |                            | 302  | Found               | ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ê°€ ì„ì‹œë¡œ ë³€ê²½ë˜ì–´ì„œ, ì„ì‹œ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. |
| 400ë²ˆëŒ€       | í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜            | 400  | Bad Request         | ìš”ì²­ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.                                       |
|               |                            | 401  | Unauthorized        | ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•´ì„œ ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤. |
|               |                            | 403  | Forbidden           | ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.                                             |
|               |                            | 404  | Not Found           | ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.                            |
|               |                            | 405  | Method Not Allowed  | ì´ ë©”ì„œë“œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.                              |
| 500ë²ˆëŒ€       | ì„œë²„ì˜¤ë¥˜                   | 500  | Server Error        | ì„œë²„ì—ì„œ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.                          |
|               |                            | 501  | Not Implemented     | í•´ë‹¹ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.                               |
|               |                            | 502  | Bad Gateway         | ì„œë²„ê°€ ê²Œì´íŠ¸ì›¨ì´ í˜¹ì€ í”„ë¡ì‹œë¡œë¶€í„° ì˜ëª»ëœ ì‘ë‹µì„ ë°›ì•˜ìŠµë‹ˆë‹¤. |
|               |                            | 503  | Service Unavailable | ì„œë²„ê°€ í˜„ì¬ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì„œë²„ê°€ ê³¼ë¶€í•˜ì¼ ê²½ìš°) |
|               |                            | 504  | Gateway Timeout     | ì„œë²„ê°€ ê²Œì´íŠ¸ì›¨ì´ í˜¹ì€ í”„ë¡ì‹œë¡œë¶€í„° ëŒ€ê¸° ì‹œê°„ë™ì•ˆ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. |

## REST API

- ë°ì´í„°ë‚˜ ìì›(Resource)ì„ HTTP URIë¡œ í‘œí˜„í•˜ê³ , HTTP í”„ë¡œí† ì½œì„ í†µí•´ ìš”ì²­ê³¼ ì‘ë‹µì„ ì •ì˜í•˜ëŠ” ë°©ì‹
- REST APIì—ì„œ RESTëŠ” â€œRepresentational State Transferâ€ì˜ ì•½ì
- API ì•ˆ ì§€í‚¤ë©´ ì•ˆí•´ë³¸ í‹°ê°€ ë‚¨ - ëˆ„êµ¬ë‚˜ ê°œë°œìë¼ë©´ ì•Œì•„ì•¼í•˜ëŠ” ê²ƒ.

### Method

1. **GET** : **ì¡°íšŒ**í•  ë•Œ ì‚¬ìš©

   1. ì„œë²„ì˜ ë°ì´í„°ë¥¼ ë³€í™”ì‹œí‚¤ì§€ ì•ŠëŠ” ìš”ì²­ì— ì‚¬ìš©
   2. 1ë²ˆ íšŒì›ì˜ ì •ë³´ë¥¼ ì£¼ì„¸ìš” í•˜ë©´ ì‘ë‹µì´ ë‹¬ë¼ì§€ë©´ ì•ˆë¨.  
   3. bodyì— ë°ì´í„° ë‹´ì„ ìˆ˜ ì—†ìŒ. â‡’ query parameterë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì „ë‹¬

2. **POST** : **ìƒì„± ë° ì²˜ë¦¬**

   1. get ë³´ë‹¤ëŠ” ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©

   2. ìƒì„±í•  ë•Œ ì‚¬ìš©, bodyì— ë°ì´í„° ë‹´ì„ ìˆ˜ ìˆìŒ.

      ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2012.png)

      ì¤‘ê´„í˜¸ê°€ bodyë¥¼ ëœ»í•˜ê³ , json type

   3. ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±

3. **PUT, PATCH**

   1. PATCH : ë°ì´í„°ë¥¼ ì¼ë¶€ë¶„ë§Œ ìˆ˜ì •í•  ë•Œ 
   2. PUT : ì •ë³´ë¥¼ ì „ì²´ ë³€ê²½ ì‹œ , ë³€ê²½í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ìƒì„±ë„ í•¨.
      1. PUTì€ ìš”ì²­ë§ˆë‹¤ ê°™ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜ = ë©±ë“±ì„±.
   3. bodyì— dataë¥¼ ë‹´ì„ ìˆ˜ ìˆìŒ.

4. **DELETE**

   1. í”¼ë“œ ê¸€, ë°ì´í„°, íšŒì› ë“± ì‚­ì œ í•  ë•Œ

5. **HEAD**

   1. Resourceì— Head ì •ë³´ ìš”ì²­í•  ë•Œ
   2. ì§€ê¸ˆì€ ì‚¬ìš©í•  ì¼ ìì£¼ ì—†ìŒ 

   https://developer.mozilla.org/ko/docs/Web/HTTP/Methods ë§í¬ì°¸ì¡°

í”„ë¡œì íŠ¸ì‹œ API ì„¤ê³„í•  ë•Œ ì˜ˆì•½ë˜ë©´ bodyì— êµ³ì´ ì˜ˆì•½ë˜ì—ˆë‹¤ê³  ë¬¸êµ¬ ë³´ë‚´ëŠ”ë° í•„ìš” ì—†ìŒ. 

200ì´ë¼ëŠ” ì½”ë“œë§Œ ë³´ë‚´ë©´ ì˜ˆì•½ì´ ëœ ê²ƒì„ ì´ê²ƒìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— 

## REST APIë¥¼ ì˜ ì ìš©í•˜ê¸° ìœ„í•œ 4ë‹¨ê³„

ë¦¬ì²˜ë“œìŠ¨ì˜ REST ì„±ìˆ™ë„ ëª¨ë¸ì„ êµ¬ì¡°í™”

![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2013.png)

 3ë‹¨ê³„ ê¹Œì§€ ì§€í‚¤ê¸° ì–´ë ¤ì›€

1,2 ë‹¨ê³„ ì¤‘ìš” - ì™¸ì›Œì•¼í•¨!

### 0 ë‹¨ê³„

1. ë‹¨ìˆœíˆ HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê¸°ë§Œ í•´ë„ ë¨

2. ë¬¼ë¡  ì´ ê²½ìš°, í•´ë‹¹ APIë¥¼ REST APIë¼ê³  í•  ìˆ˜ëŠ” ì—†ìœ¼ë©°, 0ë‹¨ê³„ëŠ” ì¢‹ì€ REST APIë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•œ ê¸°ë³¸ ë‹¨ê³„

3. í—ˆì¤€ì´ë¼ëŠ” ì´ë¦„ì˜ ì£¼ì¹˜ì˜ì˜ ì˜ˆì•½ ê°€ëŠ¥í•œ ì‹œê°„ì„ í™•ì¸í•˜ê³ , ì–´ë–¤ íŠ¹ì • ì‹œê°„ì— ì˜ˆì•½í•˜ëŠ” ìƒí™©ì„ ì˜ˆë¡œ ë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2014.png)

   1. ìœ„ í‘œì—ì„œ ì˜ëª» ëœ ê²ƒ
      - ì¡°íšŒì¸ë° POST ì‚¬ìš©ì€ ë¶ˆê°€ëŠ¥ í•œ ê²ƒ, ê·¸ë¦¬ê³  bodyì— ë°ì´í„° ë„£ì€ ê²ƒì€ ì˜ëª» ëœ ê²ƒì„.
   2. ì‹œê°„ì— í¬ì¸íŠ¸ë¥¼ ì¡ì§€ì•Šê³  í—ˆì¤€ì´ë¼ëŠ” ìì›ì— í¬ì¸íŠ¸ë¥¼ ì¡ì•„ì•¼ í•¨.
   3. slotì— ì‘ë‹µì´ ì™”ê¸° ë•Œë¬¸ì— slotì— ë“¤ì–´ê°€ì•¼ í•¨. ê·¸ë¦¬ê³  slotì˜ ì‹ë³„ìê°€ í•„ìš”

### 1ë‹¨ê³„

1. 1ë‹¨ê³„ì—ì„œëŠ” ê°œë³„ ë¦¬ì†ŒìŠ¤ì™€ì˜ í†µì‹ ì„ ì¤€ìˆ˜í•´ì•¼ í•¨

2. ëª¨ë“  ë°ì´í„°ë‚˜ ìì›(Resource)ì„ HTTP URIë¡œ í‘œí˜„ 

3. ëª¨ë“  ìì›ì€ ê°œë³„ ë¦¬ì†ŒìŠ¤ì— ë§ëŠ” ì—”ë“œí¬ì¸íŠ¸(Endpoint)ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ê²ƒê³¼ ìš”ì²­í•˜ê³  ë°›ì€ ìì›ì— ëŒ€í•œ ì •ë³´ë¥¼ ì‘ë‹µìœ¼ë¡œ ì „ë‹¬

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2015.png)

   1. doctorsë¡œ ë³€ê²½ë˜ì—ˆê³ 
   2. slotì— ë°°ì—´ë¡œ ë‹´ê²¨ìˆìŒ. jsoní˜•íƒœë¼ì„œ
   3. id : 123ìœ¼ë¡œ ë³€ê²½ ë¨

4. ì˜ˆì•½ì„ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ì´ìœ ê°€ ì—¬ëŸ¬ê°€ì§€ì¼ ê²½ìš°ì—ëŠ” responseë¥¼ ë„£ì–´ ì¤„ ìˆ˜ ìˆìŒ (ì´ìœ ê°€ ì¶©ë¶„í• ë•Œ)

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2016.png)

5. ì‹¤íŒ¨í•  ê²½ìš° ë‹¤ì‹œ í˜¸ì¶œ

6. ë‹¤ì‹œ í˜¸ì¶œí• ë•ŒëŠ” ë¶ˆê°€ëŠ¥ í•œ ë°ì´í„°ëŠ” ë³´ì´ì§€ ì•Šì•„ì•¼ í•¨.

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2017.png)

### 2ë‹¨ê³„

1. 2ë‹¨ê³„ì—ì„œëŠ”  CRUDì— ë§ê²Œ ì ì ˆí•œ HTTP ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ì¤‘ì 

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2018.png)

2. POSTâ†’  GET

   1. íŠ¹ì • ì‹œê°„ì— ì˜ˆì•½í•œë‹¤ëŠ” ê²ƒì€ GET ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚´ê³ , ì´ë•Œ GET ë©”ì„œë“œëŠ” bodyë¥¼ ê°€ì§€ì§€ ì•Šê¸° ë•Œë¬¸ì— query parameterë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì „ë‹¬

3. POSTì™€ PUTì€ êµ¬ë¶„í•´ì„œ ì‚¬ìš©

   1. POSTëŠ” ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±
   2. PUTì€ ìš”ì²­ë§ˆë‹¤ ê°™ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜ = ë©±ë“±ì„±.

4. PUTê³¼ PATCH ë„ êµ¬ë¶„í•˜ì—¬ ì‚¬ìš©

   1.  PUTì€ êµì²´, PATCHëŠ” ìˆ˜ì •ì˜ ìš©ë„ë¡œ ì‚¬ìš©

5. 201 Createdë¡œ ëª…í™•í•˜ê²Œ ì‘ì„±í•´ì•¼ í•˜ë©°, ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ê°€ Location í—¤ë”ì— ì‘ì„±ëœ URIë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë„ë¡. ê·¼ë° ì‹¤ì œë¡œ ì‚¬ìš© ì˜ ì•ˆí•¨

6. ë°ì´í„° ì¡°íšŒí•˜ê³  (GET) ì¬ì¡°íšŒ í•  ê²½ìš° ë©±ë“±ì„±ì„ í—¤ì¹˜ëŠ” ê²½ìš°ê°€ ìƒê¹€

### 3ë‹¨ê³„

1. HATEOAS(Hypertext As The Engine Of Application State)ë¼ëŠ”Â ì•½ì–´ë¡œ í‘œí˜„ë˜ëŠ” í•˜ì´í¼ë¯¸ë””ì–´ ì»¨íŠ¸ë¡¤ì„ ì ìš©

2. ì‘ë‹µì—ëŠ” ë¦¬ì†ŒìŠ¤ì˜ URIë¥¼ í¬í•¨í•œ ë§í¬ ìš”ì†Œë¥¼ ì‚½ì…í•˜ì—¬ ì‘ì„±í•œë‹¤

   1. ì‘ë‹µÂ ë‚´ì—Â ìƒˆë¡œìš´Â ë§í¬ë¥¼Â ë„£ì–´Â ìƒˆë¡œìš´Â ê¸°ëŠ¥ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ 3ë‹¨ê³„ì˜ ì¤‘ìš” í¬ì¸íŠ¸

   ![Untitled](CORS,%20HTTP,%20REST%20API%20496a87d062b84c00945adb276b4ba429/Untitled%2019.png)

ìˆ˜ì •ì´ ì•„ë‹Œ ì• ë©”í•œ ê²ƒì€ POST ì‚¬ìš©í•˜ê¸°. +ì½”ë“œ ì˜ì¨ì•¼ í•¨

### Open APIì™€ API Key

1. Open API
   1. ì •ë¶€ì—ì„œ ì œê³µí•˜ëŠ” ê³µê³µë°ì´í„° : [ê³µê³µë°ì´í„° í¬í„¸](https://www.data.go.kr/)
   2. [Open Weather Map](https://openweathermap.org/api) :  ì›¹ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë‚ ì”¨ API
      - ë°ì´í„°ë¥¼ JSON í˜•íƒœë¡œ ì‘ë‹µ
2. API Key
   1. API keyëŠ” ì„œë²„ì˜ ë¬¸ì„ ì—¬ëŠ” ì—´ì‡ 
   2. í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ë”°ë¼ ì„œë²„ì—ì„œ ì‘ë‹µí•œë‹¤ëŠ” ë§ì€ ê²°êµ­ ì„œë²„ë¥¼ ìš´ìš©í•˜ëŠ” ë°ì— ë¹„ìš©ì´ ë°œìƒ
   3. ê·¸ë˜ì„œ ë¡œê·¸ì¸ëœ ì´ìš©ìì—ê²Œë§Œ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ API Keyì˜ í˜•íƒœë¡œ ì œê³µí•˜ê³ , ë°ì´í„°ë¥¼ ìš”ì²­í•  ë•Œ API keyë¥¼ ê°™ì´ ì „ë‹¬í•´ì•¼ë§Œ ì›í•˜ëŠ” ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŒ.

## REST API ì‹¤ìŠµ

### API ì„¤ê³„

- ì´ë¦„ì€ ë™ì‚¬ ì‚¬ìš© ì•ˆë¨, endpointì˜ ê¸°ë³¸ì€ ë³µìˆ˜í˜•ì„.
- ëŒ€ë¬¸ìì™€ ëŒ€ì‰¬ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ.
- ì‚¬ìš©ìê°€ ê¸°ë³¸í‚¤ ì•Œ ìˆ˜ ì—†ìŒ - ê¸°ë³¸í‚¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì„¤ì •í•˜ê²Œ í•¨.
- ê¸°ì¡´ ì„œë¹„ìŠ¤ì—ì„œ ì–´ë–»ê²Œ ì‹ë³„í•˜ëŠ”ì§€ ìì£¼ ë³´ê¸°

---

âœ”ï¸ ì‹¤ìŠµ

1. **ë„ì„œ ì¶”ê°€ (Create a Book)**


   POST/books 

   {â€nameâ€ : â€œsleepâ€,

   â€œregisterdateâ€ : â€œ2024-05-31â€,

   â€œauthorâ€ : â€œjerryâ€}

2. **ë„ì„œ ëª©ë¡ ì¡°íšŒ (Get All Books)**

   GET/books

3. **íŠ¹ì • ë„ì„œ ì¡°íšŒ (Get a Single Book)**

   GET/books/id

   > ê¸°ë³¸ í‚¤ë¡œ ì¡°íšŒí•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ idê°€ ì•„ë‹Œ ì°¾ê³ ì í•˜ëŠ” ì´ë¦„ì´ë‚˜ ì €ì ë“±ìœ¼ë¡œ ì¡°íšŒí•´ì•¼ í•¨.

4. **ë„ì„œ ì •ë³´ ìˆ˜ì • (Update a Book)**

   PATCH/books

5. **ë„ì„œ ì‚­ì œ (Delete a Book)**

   Delete/books/id

6. **ë„ì„œ ëŒ€ì¶œ (Borrow a Book)**

   GET/books/name=sleepy? 

   POST/loanbooks/book/id

   > ë‚´ ìƒê°ì—ëŠ” ì¡°íšŒë¥¼ í•˜ê³  ëŒ€ì¶œ ëª©ë¡ì„ ìƒì„±í•´ì•¼ í•œë‹¤ê³  ìƒê°í–ˆìŒ
   > í•˜ì§€ë§Œ ë°”ë¡œ ëŒ€ì¶œëª©ë¡ì—ì„œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì ì ˆ
   > POST â†’ /loanrecords
   > {
   > "bookId": 3,
   > "userId": 11,
   > "loanDate" "2024-05-30"
   > }

7. **ë„ì„œ ë°˜ë‚© (Return a Book)**

   GET/loanbooks/id

   POST/loanbooks/id

   > ë§ˆì°¬ê°€ì§€ë¡œ ì±… ë°”ì½”ë“œë¡œ ì¡°íšŒ í›„ ëŒ€ì¶œ ëª©ë¡ì´ ì¼ë¶€ë¶„ ìˆ˜ì •ëœë‹¤ê³  ìƒê°í•¨.
   > ê·¸ëŸ¬ë‚˜ ëŒ€ì¶œëª©ë¡ë§Œ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì ì ˆ
   > ex) PATCH â†’ /loanrecords/3 <br/>
   > res ->
   > {
   > "loanId": 3,
   > "userId": 2,
   > "bookId": 7,~~~
   >  }

8. **ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ (Get Loan Records)**

   Get/loanbooks/username=â€™jerryâ€™

   > userId â†’ GET /loanrecoreds?userId={id} â†’ íŠ¹ì • ìœ ì €ì˜ ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ
   > bookId â†’ GET /loanrecoreds?bookId ={id} â†’ íŠ¹ì • ë„ì„œì˜ ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ
   > loanDate â†’ GET /loanrecoreds?loanDate ={id} â†’ íŠ¹ì • ëŒ€ì¶œì¼ ê¸°ì¤€ ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ
   > returnDate â†’ GET /loanrecoreds?returnDate ={id} â†’ íŠ¹ì • ë°˜ë‚©ì¼ ê¸°ì¤€ ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ
   > isReturned â†’ GET /loanrecoreds?isReturned={id} â†’ ë°˜ë‚©ì—¬ë¶€ ê¸°ì¤€ ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ
   > ex) 
   > GET â†’  /loanrecords?userId=3?bookId=7 â†’ 3ë²ˆ ìœ ì €ê°€ 7ë²ˆ ì±…ì„ ë¹Œë¦° ëŒ€ì¶œ ê¸°ë¡ ì¡°íšŒ

## Comment

- ë°°ìš´ë‚´ìš© : CORS, HTTP, REST API, REST API ì‹¤ìŠµ
- CORSëŠ” ì²˜ìŒì— ì–´ë ¤ì›Œì„œ ì´í•´í•˜ëŠ”ë° ì˜¤ë˜ê±¸ë¦¼, ë” ë” ë” ë§ì´ ë´ì•¼í•  ê²ƒ ê°™ìŒ.
- ğŸ’ Network ë¶€ë¶„ì€ ë‹¨ìˆœíˆ ì´í•´í•˜ê³  ë„˜ì–´ê°€ê¸°ì—ëŠ” ë‚˜ì¤‘ì— ë§ë‹¥ëœ¨ë ¸ì„ ë•Œ ì–´ì–´ì–´ ì´ê²Œë­ì•¼ í•  ê²ƒ ê°™ì€ ë¶€ë¶„ì´ ìˆë‹¤.<br/>\
  íŠ¹íˆ CORS ë¶€ë¶„, ìˆ˜ì—…ë“¤ì„ ë•Œ ì•„~~ í•˜ê³  ë³„ê±°ì•„ë‹ˆë„¤ í–ˆëŠ”ë° ë‹¤ì‹œ ë³µìŠµí•˜ëŠ”ë° ì™œ ì²˜ìŒë³´ëŠ” ê²ƒ ê°™ì§€ ì´ê±°..? ë°°ì› ì—ˆë‚˜ ì‹¶ì—ˆë‹¤. <br/>
  ì‚¬ì‹¤ simpleê³¼ Preflightì˜ ì°¨ì´ì™€ ì´ëŸ°ì‹ìœ¼ë¡œë§Œ ì´í•´í–ˆê³  ê¹Šê²ŒëŠ” ì´í•´í•˜ì§€ ëª»í–ˆë˜ ê²ƒì´ì—ˆë‹¤. <br/> 
  ì§€ê¸ˆ ê¹Šê²Œë³´ê¸° ë³´ë‹¤ ë‚˜ì¤‘ì— í”„ë¡œì íŠ¸í•  ë•Œ ì˜¤ë¥˜ë‚˜ë©´ ê·¸ ë•Œ ë‹¤ì‹œ ëŒì•„ì™€ì„œ ë³´ë¼ê³  í•˜ì…¨ëŠ”ë° <br/>
  íŒŒì›Œ ì œì´ì¸ ë‚˜ëŠ” ê·¸ëŸ° ë‹¹í™©ìŠ¤ëŸ¬ìš´ ìƒí™©ì´ ìƒê¸°ê¸° ì „ì— ì–´ì„œ ë³µìŠµ ë§ì´ í•´ì•¼ê² ë‹¤...!